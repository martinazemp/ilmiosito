<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Martina Zemp - Portfolio</title>
<style>
    body {
        margin: 0;
        padding: 0;
        font-family: Helvetica, sans-serif;
        color: white;
        background-color: #000000;
        overflow-x: hidden;
        min-height: 1050vh; 
    }

    #background {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 1;
        filter: contrast(130%) brightness(70%);
    }

    #face-container {
        position: fixed;
        top: 0;
        right: 0;
        width: 60vw;
        height: 100vh;
        z-index: 5;
        opacity: 0;
        transition: opacity 0.5s ease;
        pointer-events: auto; 
        display: flex;
        align-items: center;
        justify-content: center;
    }

    #m-container {
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        z-index: 4;
        pointer-events: none;
    }

    .content-overlay {
        position: relative;
        z-index: 10;
        pointer-events: none;
    }

    h1#title {
        font-size: clamp(60px, 15vw, 240px);
        text-align: center;
        position: fixed; 
        top: 40%;
        left: 50%;
        transform: translate(-50%, -50%);
        white-space: nowrap;
        margin: 0;
        letter-spacing: -5px;
        transition: opacity 0.5s ease, transform 0.5s ease;
    }

    h2#subtitle {
        font-size: 20px;
        position: fixed;
        left: 40px;
        top: 100px;
        margin: 0;
        line-height: 1.4;
        opacity: 0;
        transform: translateX(-50px);
        transition: opacity 0.5s ease, transform 0.5s ease;
    }
</style>
</head>
<body>

<canvas id="background"></canvas>
<div id="face-container"></div>
<div id="m-container"></div>

<div class="content-overlay">
    <h1 id="title">Martina Zemp</h1>
    <h2 id="subtitle">Pagina personale di coding <br> 
        e sperimentazione visiva.<br><br>
        Una settimana di seminario <br>
         di introduzione alla <br>
        programmazione del designer<br>
    </h2>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.0/p5.min.js"></script>

<script>
// --- 1. ANIMAZIONE VOLTO ---
const faceSketch = (p) => {
    let img;
    let hasImg = false;
    p.preload = () => { img = p.loadImage('ag.png', () => hasImg = true); };
    p.setup = () => {
        let cnv = p.createCanvas(p.windowWidth * 0.6, p.windowHeight);
        cnv.parent('face-container');
        if(hasImg) img.resize(80, 0);
    };
    p.draw = () => {
        p.clear();
        if(!hasImg) return;
        let sY = window.scrollY;
        let baseChaos = (sY < 2000) ? p.map(sY, 1400, 2000, 450, 8) : p.map(sY, 2800, 3800, 8, 500);
        baseChaos = p.constrain(baseChaos, 5, 500);
        let d = 10, ox = (p.width - img.width * d) / 2, oy = (p.height - img.height * d) / 2;
        for (let j = 0; j < img.height; j++) {
            for (let i = 0; i < img.width; i++) {
                let col = img.get(i, j);
                if (p.alpha(col) < 128) continue;
                let dMouse = p.dist(p.mouseX, p.mouseY, ox + i * d, oy + j * d);
                let currentChaos = baseChaos * p.max(1, p.map(dMouse, 0, 300, 12, 1));
                let nX = p.noise(i * 0.1, j * 0.1, p.frameCount * 0.02);
                let nY = p.noise(i * 0.1, j * 0.1, p.frameCount * 0.02 + 10);
                p.fill(255); p.noStroke();
                p.circle(ox + i * d + p.map(nX, 0, 1, -currentChaos, currentChaos), 
                         oy + j * d + p.map(nY, 0, 1, -currentChaos, currentChaos), 
                         p.map(p.brightness(col), 0, 255, 0, d * 0.8));
            }
        }
    };
    p.windowResized = () => { p.resizeCanvas(p.windowWidth * 0.6, p.windowHeight); };
};
new p5(faceSketch);

// --- 2. ANIMAZIONE M ---
const mSketch = (p) => {
    const m_coords = [0, 10, 0, 0, 4, 5, 8, 0, 8, 10, 6.5, 10, 6.5, 3, 4, 6.5, 1.5, 3, 1.5, 10]; 
    p.setup = () => { p.createCanvas(p.windowWidth, p.windowHeight).parent('m-container'); };
    p.draw = () => {
        p.clear();
        let sY = window.scrollY;
        if (sY > 4800) {
            let mScroll = p.map(sY, 4800, 9500, 0, 1, true);
            let alphaFade = p.map(mScroll, 0.85, 0.98, 255, 0, true);
            if (alphaFade <= 0) return;
            let chaos = p.map(mScroll, 0, 0.2, 1, 0, true); 
            let zoom = 1 + p.pow(p.map(mScroll, 0.25, 1, 0, 1, true) * 15, 3); 
            let disint = p.map(mScroll, 0.35, 0.85, 0, 1, true);
            p.noFill(); 
            for (let i = 0; i < 60; i++) { 
                p.stroke(255, p.map(i, 0, 60, 255, 40) * (alphaFade / 255)); 
                p.push(); p.translate(p.width / 2, p.height / 2); 
                p.rotate(p.sin((p.frameCount + (i * 3)) * 0.02) * p.lerp(chaos * 5, 0.15 + (disint * 2.5), 1 - chaos)); 
                let s = (8 + (60 - i) * 1.5) * zoom; 
                p.strokeWeight(p.map(mScroll, 0.3, 1, 1.2, 0.1)); 
                p.beginShape(); 
                for (let j = 0; j < m_coords.length; j += 2) { 
                    let jit = (chaos * 180) + (disint * 400 * (i/60)); 
                    p.vertex((m_coords[j] - 4) * s + (p.noise(j, i, p.frameCount * 0.04) - 0.5) * jit, 
                             (m_coords[j + 1] - 5) * s + (p.noise(j+10, i, p.frameCount * 0.04) - 0.5) * jit); 
                } 
                p.endShape(p.CLOSE); p.pop(); 
            } 
        }
    };
    p.windowResized = () => { p.resizeCanvas(p.windowWidth, p.windowHeight); };
};
new p5(mSketch);

// --- 3. SFONDO BLOCCHI ---
const bgCanvas = document.getElementById("background"), bgCtx = bgCanvas.getContext("2d");
let blocks = [];
function initBg() {
    bgCanvas.width = window.innerWidth; bgCanvas.height = window.innerHeight; blocks = [];
    for (let i = 0; i < 600; i++) {
        blocks.push({ x: Math.random() * bgCanvas.width, y: Math.random() * bgCanvas.height * 4, w: Math.random() > 0.8 ? Math.random() * 60 + 20 : Math.random() * 4 + 1, h: Math.random() * 500 + 50, c: Math.floor(Math.random() * 110 + 20), o: Math.random() * 0.6 + 0.1, s: Math.random() * 0.6 + 0.1 });
    }
}
function drawBg() {
    bgCtx.fillStyle = "#000000"; bgCtx.fillRect(0, 0, bgCanvas.width, bgCanvas.height);
    let sY = window.scrollY, dFactor = sY < 1200 ? 1 : Math.max(0, 1 - (sY - 1200) / 1000);
    if (dFactor > 0) {
        for (let i = 0; i < Math.floor(blocks.length * dFactor); i++) {
            let b = blocks[i], curY = b.y - (sY * b.s);
            if (curY + b.h < -200) b.y += bgCanvas.height + 1000;
            bgCtx.fillStyle = `rgba(${b.c},${b.c},${b.c},${b.o * dFactor})`;
            bgCtx.fillRect(b.x, curY, b.w, b.h);
        }
    }
    requestAnimationFrame(drawBg);
}

// --- 4. ANIMAZIONE TITOLO LETTERE SPARSE ---
function animateTitle(el) {
    const txt = el.textContent; el.textContent = '';
    [...txt].forEach((c, i) => {
        const s = document.createElement('span'); s.textContent = c === " " ? "\u00A0" : c;
        s.style.display = 'inline-block'; s.style.opacity = 0;
        s.style.transform = `translate(${Math.random()*200-100}px,${Math.random()*200-100}px)`;
        el.appendChild(s);
        setTimeout(() => { 
            s.style.transition = 'all 0.8s cubic-bezier(0.2, 1, 0.3, 1)'; 
            s.style.opacity = 1; 
            s.style.transform = 'translate(0,0)'; 
        }, i * 60);
    });
}

// --- 5. LOGICA SCROLL ---
window.addEventListener('scroll', () => {
    const sY = window.scrollY;
    const title = document.getElementById('title'), subtitle = document.getElementById('subtitle'), face = document.getElementById('face-container');
    if (sY < 450) {
        title.style.opacity = Math.max(0, 1 - sY / 300);
        title.style.transform = `translate(-50%, ${-50 - (sY/7)}%)`;
    } else title.style.opacity = 0;
    if (sY > 450 && sY < 2000) {
        subtitle.style.opacity = 1;
        if (sY > 1400) {
            subtitle.style.opacity = Math.max(0, 1 - (sY - 1400) / 400);
            subtitle.style.transform = `translateY(-${(sY - 1400)}px)`;
        } else subtitle.style.transform = "translateX(0)";
    } else subtitle.style.opacity = 0;
    if (sY > 1600 && sY < 4800) { 
        face.style.opacity = '1'; 
        if (sY > 4000) face.style.opacity = Math.max(0, 1 - (sY - 4000) / 600);
    } else face.style.opacity = '0';
});

initBg(); drawBg();
animateTitle(document.getElementById('title'));
window.addEventListener("resize", initBg);
</script>

</body>
</html>